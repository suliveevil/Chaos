/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/node-fetch/browser.js
var require_browser = __commonJS({
  "node_modules/node-fetch/browser.js"(exports, module2) {
    "use strict";
    var getGlobal = function() {
      if (typeof self !== "undefined") {
        return self;
      }
      if (typeof window !== "undefined") {
        return window;
      }
      if (typeof global !== "undefined") {
        return global;
      }
      throw new Error("unable to locate global object");
    };
    var global = getGlobal();
    module2.exports = exports = global.fetch;
    if (global.fetch) {
      exports.default = global.fetch.bind(global);
    }
    exports.Headers = global.Headers;
    exports.Request = global.Request;
    exports.Response = global.Response;
  }
});

// node_modules/obsidian-dataview/lib/index.js
var require_lib = __commonJS({
  "node_modules/obsidian-dataview/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    require("obsidian");
    var getAPI3 = (app) => {
      var _a;
      if (app)
        return (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
      else
        return window.DataviewAPI;
    };
    var isPluginEnabled = (app) => app.plugins.enabledPlugins.has("dataview");
    exports.getAPI = getAPI3;
    exports.isPluginEnabled = isPluginEnabled;
  }
});

// main.ts
__export(exports, {
  default: () => FileCookerPlugin
});
var import_obsidian23 = __toModule(require("obsidian"));

// src/action/delete-action.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/modal/delete-confirm-modal.ts
var import_obsidian = __toModule(require("obsidian"));
var DeleteConfirmModal = class extends import_obsidian.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Delete?" });
      if (this.resultArr.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.resultArr.forEach((info) => {
          contentEl.createEl("div", { text: info.path });
        });
        new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => {
          this.close();
          this.resultArr.forEach((info) => {
            this.app.vault.trash(info, true);
          });
          new import_obsidian.Notice("Delete Success!");
        })).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian.Notice("Delete Canceled!");
        }));
      }
    });
  }
};

// src/action/delete-action.ts
var DeleteAction = class {
  constructor(app) {
    this.app = app;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new DeleteConfirmModal(this.app, files).open();
    } else {
      new import_obsidian2.Notice("No Files Found!");
    }
  }
};

// src/action/edit-front-matter-action.ts
var import_obsidian4 = __toModule(require("obsidian"));

// src/modal/edit-front-matter-modal.ts
var import_obsidian3 = __toModule(require("obsidian"));
var EditFrontMatterModal = class extends import_obsidian3.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
    let tmpFlag = localStorage.getItem("overrideFlag");
    if (tmpFlag && tmpFlag == "true") {
      this.overrideFlag = true;
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Edit Front Matter" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian3.Setting(contentEl).addText((txt) => txt.setPlaceholder("Front Matter Key").onChange((val) => {
        this.key = val;
      })).addText((txt) => txt.setPlaceholder("Front Matter Value").onChange((val) => {
        this.val = val;
      })).addToggle((toggle) => {
        toggle.setValue(this.overrideFlag);
        toggle.setTooltip("Override if exists!");
        toggle.onChange((val) => {
          localStorage.setItem("overrideFlag", val + "");
          this.overrideFlag = val;
        });
      });
      new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if (this.key == null || this.key.trim() == "") {
          new import_obsidian3.Notice("Key could not be empty!");
          return;
        }
        if (this.val == null || this.val.trim() == "") {
          new import_obsidian3.Notice("Value could not be empty!");
          return;
        }
        this.close();
        let api = this.app.plugins.plugins["metaedit"].api;
        let c_num = 0;
        let u_num = 0;
        for (let i = 0; i < this.resultArr.length; i++) {
          let info = this.resultArr[i];
          let val = yield api.getPropertyValue(this.key, info);
          if (val == null) {
            api.createYamlProperty(this.key, this.val, info);
            c_num += 1;
          } else if (this.overrideFlag || val.trim() == "") {
            api.update(this.key, this.val, info);
            u_num += 1;
          }
        }
        new import_obsidian3.Notice("Edit Success!");
        new import_obsidian3.Notice("Add " + c_num + " !");
        new import_obsidian3.Notice("Update " + u_num + " !");
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian3.Notice("Edit Canceled!");
      }));
    }
  }
};

// src/action/edit-front-matter-action.ts
var EditFrontMatterAction = class {
  constructor(app) {
    this.app = app;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new EditFrontMatterModal(this.app, files).open();
    } else {
      new import_obsidian4.Notice("No Files Found!");
    }
  }
};

// src/action/move-action.ts
var import_obsidian6 = __toModule(require("obsidian"));

// src/modal/move-confirm-modal.ts
var import_obsidian5 = __toModule(require("obsidian"));
var MoveConfirmModal = class extends import_obsidian5.Modal {
  constructor(app, moveInfos) {
    super(app);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Move/Copy?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.sourceFile.path + " -> " + info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian5.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Copy instead!");
      toggle.onChange((val) => {
        this.copyFlag = val;
      });
    });
    new import_obsidian5.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      if (this.copyFlag) {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.vault.copy(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian5.Notice("Copy Success!");
      } else {
        for (const key in this.moveInfos) {
          let info = this.moveInfos[key];
          yield this.app.fileManager.renameFile(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
        }
        new import_obsidian5.Notice("Move Success!");
      }
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian5.Notice("Move Canceled!");
    }));
  }
};

// src/action/move-action.ts
var MoveAction = class {
  constructor(app, targetPath) {
    this.app = app;
    this.targetPath = targetPath;
  }
  act(actionModels) {
    const moveInfos = [];
    if (actionModels.length > 0) {
      actionModels.forEach((model) => {
        let ff = model.file;
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new MoveConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian6.Notice("No Files Found!");
    }
  }
};

// src/action/rename-action.ts
var import_obsidian9 = __toModule(require("obsidian"));

// src/modal/rename-modal.ts
var import_obsidian8 = __toModule(require("obsidian"));

// src/modal/rename-confirm-modal.ts
var import_obsidian7 = __toModule(require("obsidian"));
var RenameConfirmModal = class extends import_obsidian7.Modal {
  constructor(app, resultArr, prefix, suffix) {
    super(app);
    this.resultArr = resultArr;
    this.prefix = prefix;
    this.suffix = suffix;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    this.resultArr.forEach((info) => {
      let name = this.newName(info.name);
      contentEl.createEl("div", { text: info.name + "->" + name });
    });
    new import_obsidian7.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
        new import_obsidian7.Notice("Prefix and Suffix could not be all empty!");
        return;
      }
      this.close();
      for (let i = 0; i < this.resultArr.length; i++) {
        let info = this.resultArr[i];
        let name = this.newName(info.name);
        yield this.app.fileManager.renameFile(info, info.parent.path + "/" + name);
      }
      new import_obsidian7.Notice("Rename Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian7.Notice("Rename Canceled!");
    }));
  }
  newName(name) {
    let tName = name + "";
    let suf = "";
    if (tName.endsWith(".md")) {
      tName = tName.replace(".md", "");
      suf = ".md";
    }
    if (this.prefix && this.prefix.trim() != "") {
      if (this.prefix.startsWith("-")) {
        let t = this.prefix.substring(1, this.prefix.length);
        if (tName.startsWith(t)) {
          tName = tName.substring(t.length, tName.length);
        }
      } else {
        tName = this.prefix + tName;
      }
    }
    if (this.suffix && this.suffix.trim() != "") {
      if (this.suffix.startsWith("-")) {
        let t = this.suffix.substring(1, this.suffix.length);
        if (tName.endsWith(t)) {
          tName = tName.substring(0, tName.length - t.length);
        }
      } else {
        tName = tName + this.suffix;
      }
    }
    return tName + suf;
  }
};

// src/modal/rename-modal.ts
var RenameModal = class extends import_obsidian8.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Rename Files" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian8.Setting(contentEl).addText((txt) => txt.setPlaceholder("Prefix").onChange((val) => {
        this.prefix = val;
      })).addText((txt) => txt.setPlaceholder("Suffix").onChange((val) => {
        this.suffix = val;
      }));
      new import_obsidian8.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
        if ((this.prefix == null || this.prefix.trim() == "") && (this.suffix == null || this.suffix.trim() == "")) {
          new import_obsidian8.Notice("Prefix and Suffix could not be all empty!");
          return;
        }
        this.close();
        new RenameConfirmModal(this.app, this.resultArr, this.prefix, this.suffix).open();
      }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian8.Notice("Rename Canceled!");
      }));
    }
  }
};

// src/action/rename-action.ts
var RenameAction = class {
  constructor(app) {
    this.app = app;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new RenameModal(this.app, files).open();
    } else {
      new import_obsidian9.Notice("No Files Found!");
    }
  }
};

// src/action/sync-flomo-action.ts
var import_obsidian11 = __toModule(require("obsidian"));

// src/modal/sync-flomo-confirm-modal.ts
var import_obsidian10 = __toModule(require("obsidian"));
var import_node_fetch = __toModule(require_browser());
var SyncFlomoConfirmModal = class extends import_obsidian10.Modal {
  constructor(plugin, actionModels) {
    super(plugin.app);
    this.plugin = plugin;
    this.actionModels = actionModels;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Sync to flomo?" });
      if (this.actionModels.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.actionModels.forEach((info) => {
          if (info.file != null) {
            contentEl.createEl("div", { text: info.file.path });
          } else {
            contentEl.createEl("div", { text: "Sync Selection" });
          }
        });
        new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
          this.close();
          for (let i = 0; i < this.actionModels.length; i++) {
            let info = this.actionModels[i];
            let cont;
            if (info.file != null) {
              cont = yield this.app.vault.read(info.file);
            } else {
              cont = info.content;
            }
            const response = yield (0, import_node_fetch.default)(this.plugin.settings.flomoAPI, {
              method: "POST",
              body: JSON.stringify({
                content: cont
              }),
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json"
              }
            });
            if (!response.ok) {
              new import_obsidian10.Notice(`Sync to flomo Error!${response.text}[${response.status}]`);
              return;
            }
          }
          new import_obsidian10.Notice("Sync to flomo Success!");
        }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian10.Notice("Sync to flomo Canceled!");
        }));
      }
    });
  }
};

// src/action/sync-flomo-action.ts
var SyncFlomoAction = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  act(actionModels) {
    let flomoAPI = this.plugin.settings.flomoAPI;
    if (!flomoAPI || flomoAPI.trim() == "") {
      new import_obsidian11.Notice("Please config flomoAPI first!");
      return;
    }
    if (actionModels.length > 0) {
      new SyncFlomoConfirmModal(this.plugin, actionModels).open();
    } else {
      new import_obsidian11.Notice("No Files Found!");
    }
  }
};

// src/modal/choose-file-modal.ts
var import_obsidian14 = __toModule(require("obsidian"));

// src/action/merge-action.ts
var import_obsidian13 = __toModule(require("obsidian"));

// src/modal/merge-confirm-modal.ts
var import_obsidian12 = __toModule(require("obsidian"));
var MergeConfirmModal = class extends import_obsidian12.Modal {
  constructor(app, resultArr, targetFilePath) {
    super(app);
    this.targetFilePath = targetFilePath;
    this.resultArr = resultArr;
    this.lineBreak = getLinebreak();
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Merge?" });
    contentEl.createEl("div", { text: "Merge all files below -> " + this.targetFilePath + " !" });
    this.resultArr.forEach((info) => {
      contentEl.createEl("div", { text: info.path });
    });
    new import_obsidian12.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      let targetFile = this.app.vault.getAbstractFileByPath(this.targetFilePath);
      if (targetFile == null) {
        targetFile = yield this.app.vault.create(this.targetFilePath, "");
      }
      for (const key in this.resultArr) {
        let info = this.resultArr[key];
        if (info.name.endsWith(".md")) {
          let cont = yield this.app.vault.read(info);
          cont = this.clearYaml(cont);
          cont = this.demoteHeader(cont);
          cont = "# " + info.name.substring(0, info.name.length - 3) + this.lineBreak + cont + this.lineBreak + this.lineBreak;
          yield this.app.vault.append(targetFile, cont);
        } else {
          let cont = `![[${info.name}]]${this.lineBreak}${this.lineBreak}`;
          yield this.app.vault.append(targetFile, cont);
        }
      }
      new import_obsidian12.Notice("Merge Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian12.Notice("Merge Canceled!");
    }));
  }
  clearYaml(cont) {
    if (cont.startsWith("---")) {
      let lines = cont.split(this.lineBreak);
      let results = "";
      let appendFlag = true;
      for (let idx in lines) {
        if (lines[idx] == "---") {
          appendFlag = !appendFlag;
          continue;
        }
        if (appendFlag) {
          results = results + lines[idx] + this.lineBreak;
        }
      }
      return results;
    } else {
      return cont;
    }
  }
  demoteHeader(cont) {
    let reg = /# /g;
    return cont.replace(reg, "## ");
  }
};
function getLinebreak() {
  let oss = ["Windows", "Mac", "Linux"];
  let lineBreaks = ["\r\n", "\n", "\n"];
  for (let i = 0; i < oss.length; i++) {
    let os = oss[i];
    if (navigator.userAgent.indexOf(os) != -1) {
      return lineBreaks[i];
    }
  }
  return "\n";
}

// src/action/merge-action.ts
var MergeAction = class {
  constructor(app, targetFilePath) {
    this.app = app;
    this.targetFilePath = targetFilePath;
  }
  act(actionModels) {
    return __async(this, null, function* () {
      if (actionModels.length > 0) {
        let files = actionModels.map((model) => model.file);
        new MergeConfirmModal(this.app, files, this.targetFilePath).open();
      } else {
        new import_obsidian13.Notice("No Files Found!");
      }
    });
  }
};

// src/modal/choose-file-modal.ts
var ChooseFileModal = class extends import_obsidian14.SuggestModal {
  constructor(app, readable) {
    super(app);
    this.readable = readable;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const files = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((file) => {
      if (file instanceof import_obsidian14.TFile && file.path.toLowerCase().contains(lowerCaseInputStr)) {
        files.push(file.path);
      }
    });
    if (files.length == 0) {
      if (query.endsWith(".md")) {
        files.push(query);
      } else {
        files.push(query + ".md");
      }
    }
    return files;
  }
  renderSuggestion(filePath, el) {
    el.createEl("div", { text: filePath });
  }
  onChooseSuggestion(file, evt) {
    let action = new MergeAction(this.app, file);
    this.readable.read(action);
  }
};

// src/modal/choose-folder-modal.ts
var import_obsidian15 = __toModule(require("obsidian"));
var ChooseFolderModal = class extends import_obsidian15.SuggestModal {
  constructor(app, readable, actionFunc) {
    super(app);
    this.readable = readable;
    this.actionFunc = actionFunc;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian15.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path });
  }
  onChooseSuggestion(folder, evt) {
    let action = this.actionFunc(folder.path);
    this.readable.read(action);
  }
};

// src/reader/clipboard-reader.ts
var import_obsidian16 = __toModule(require("obsidian"));

// src/action/action.ts
var ActionModel = class {
  constructor(file, content) {
    this.file = file;
    this.content = content;
  }
};

// src/reader/read-info.ts
var ReadInfo = class {
  constructor(limit) {
    try {
      this.limit = limit;
    } catch (e) {
      throw new Error("limit [" + this.limit + "] must be a number!");
    }
    this.actionModels = [];
  }
  addFile(file) {
    if (this.actionModels.length >= this.limit) {
      throw new Error("Load more than " + this.limit + " files!");
    }
    let model = new ActionModel(file);
    this.actionModels.push(model);
  }
  addContent(cont) {
    if (this.actionModels.length >= this.limit) {
      throw new Error("Load more than " + this.limit + " files!");
    }
    let model = new ActionModel(null, cont);
    this.actionModels.push(model);
  }
  getModels() {
    return this.actionModels;
  }
};

// src/reader/clipboard-reader.ts
var ClipboardReader = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  read(action) {
    let readInfo = new ReadInfo(this.plugin.settings.limit);
    let promiseStr = navigator.clipboard.readText();
    promiseStr.then((str) => {
      let lines = str.split("\n");
      try {
        lines.forEach((line) => {
          let f = line;
          if (f.startsWith("[[")) {
            f = f.substring(2, f.length);
          }
          if (f.endsWith("]]")) {
            f = f.substring(0, f.length - 2);
          }
          if (!f.endsWith(".md") && !f.endsWith(".MD") && !f.endsWith(".Md") && !f.endsWith(".mD")) {
            f = f + ".md";
          }
          let ff = this.app.vault.getAbstractFileByPath(f);
          if (ff != null) {
            readInfo.addFile(ff);
          }
        });
        action.act(readInfo.getModels());
      } catch (e) {
        new import_obsidian16.Notice(e.message);
      }
    }).catch((e) => {
      new import_obsidian16.Notice("Clipboard Content Error!" + e);
    });
  }
};

// src/command/clipboard-command.ts
var ClipboardCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registMoveFile();
    this.registSyncFlomo();
    this.registMergeFile();
    this.registDeleteFile();
    this.registEditProp();
    this.registRenameFile();
  }
  registRenameFile() {
    this.plugin.addCommand({
      id: "rename-in-clipboard-files",
      name: "Rename in clipboard files ...",
      callback: () => {
        new ClipboardReader(this.plugin).read(new RenameAction(this.plugin.app));
      }
    });
  }
  registEditProp() {
    let metaedit = this.plugin.app.plugins.plugins["metaedit"];
    this.plugin.addCommand({
      id: "edit-front-matter-in-clipboard-files",
      name: "Edit Front Matter in clipboard files ...",
      checkCallback: (checking) => {
        if (!checking) {
          new ClipboardReader(this.plugin).read(new EditFrontMatterAction(this.plugin.app));
        }
        return metaedit != null;
      }
    });
  }
  registDeleteFile() {
    this.plugin.addCommand({
      id: "delete-files-in-clipboard",
      name: "Delete files in clipboard!",
      callback: () => {
        new ClipboardReader(this.plugin).read(new DeleteAction(this.plugin.app));
      }
    });
  }
  registMergeFile() {
    this.plugin.addCommand({
      id: "merge-files-to",
      name: "Merge files to ...",
      callback: () => {
        new ChooseFileModal(this.plugin.app, new ClipboardReader(this.plugin)).open();
      }
    });
  }
  registSyncFlomo() {
    this.plugin.addCommand({
      id: "sync-files-to-flomo",
      name: "Sync files to flomo ...",
      callback: () => {
        new ClipboardReader(this.plugin).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registMoveFile() {
    this.plugin.addCommand({
      id: "move-files-to",
      name: "Move files to ...",
      callback: () => {
        let actionFunc = (path) => {
          return new MoveAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new ClipboardReader(this.plugin), actionFunc).open();
      }
    });
  }
};

// src/action/create-action.ts
var import_obsidian18 = __toModule(require("obsidian"));

// src/modal/create-confirm-modal.ts
var import_obsidian17 = __toModule(require("obsidian"));
var CreateConfirmModal = class extends import_obsidian17.Modal {
  constructor(app, moveInfos) {
    super(app);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Create?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian17.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      for (const key in this.moveInfos) {
        let info = this.moveInfos[key];
        yield this.app.vault.create(info.targetDir + "/" + info.sourceFile.name, "");
      }
      new import_obsidian17.Notice("Create Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian17.Notice("Create Canceled!");
    }));
  }
};

// src/action/create-action.ts
var CreateAction = class {
  constructor(app, targetPath) {
    this.app = app;
    this.targetPath = targetPath;
  }
  act(actionModels) {
    const moveInfos = [];
    if (actionModels.length > 0) {
      actionModels.forEach((model) => {
        let ff = model.file;
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new CreateConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian18.Notice("No Files Found!");
    }
  }
};

// src/reader/current-file-reader.ts
var import_obsidian19 = __toModule(require("obsidian"));
var ReadType;
(function(ReadType2) {
  ReadType2[ReadType2["LINKS"] = 0] = "LINKS";
  ReadType2[ReadType2["UN_RESOLVED_LINKS"] = 1] = "UN_RESOLVED_LINKS";
  ReadType2[ReadType2["CONTENT"] = 2] = "CONTENT";
  ReadType2[ReadType2["SELECTION"] = 3] = "SELECTION";
})(ReadType || (ReadType = {}));
var CurrentFileReader = class {
  constructor(plugin, readType, selection) {
    this.readType = 0;
    this.plugin = plugin;
    this.app = plugin.app;
    this.readType = readType;
    this.selection = selection;
  }
  read(action) {
    let readInfo = new ReadInfo(this.plugin.settings.limit);
    let currentFile = this.app.workspace.getActiveFile();
    if (currentFile == null) {
      new import_obsidian19.Notice("No active file!");
      return;
    }
    let currentFilePath = currentFile.path;
    let paths = [];
    if (this.readType == 2) {
      paths.push(currentFilePath);
    } else if (this.readType == 1) {
      let linkObj = this.app.metadataCache.unresolvedLinks[currentFilePath];
      for (let key in linkObj) {
        paths.push(key);
      }
    } else {
      let linkObj = this.app.metadataCache.resolvedLinks[currentFilePath];
      for (let key in linkObj) {
        paths.push(key);
      }
    }
    try {
      if (this.readType == 1) {
        paths.forEach((path) => {
          let ff = new VirtualFile(path);
          readInfo.addFile(ff);
        });
      } else if (this.readType == 3) {
        readInfo.addContent(this.selection);
      } else {
        paths.forEach((path) => {
          let ff = this.app.vault.getAbstractFileByPath(path);
          if (ff != null) {
            readInfo.addFile(ff);
          }
        });
      }
      action.act(readInfo.getModels());
    } catch (e) {
      new import_obsidian19.Notice(e.message);
    }
  }
};
var VirtualFile = class {
  constructor(path) {
    let idx = path.lastIndexOf("/");
    if (!path.endsWith(".md")) {
      path = path + ".md";
    }
    this.path = path;
    if (idx >= 0) {
      this.name = path.substring(idx, path.length);
    } else {
      this.name = path;
    }
  }
};

// src/command/current-file-command.ts
var CurrentFileCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    this.registMoveFile();
    this.registSyncContentToFlomo();
    this.registSyncSelectionToFlomo();
    this.registSyncFileToFlomo();
    this.registCreateFile();
    this.registMergeFile();
    this.registDeleteFile();
    this.registEditProp();
    this.registRenameFile();
  }
  registRenameFile() {
    this.plugin.addCommand({
      id: "rename-in-current-file-links",
      name: "Rename in current file links ...",
      callback: () => {
        new CurrentFileReader(this.plugin).read(new RenameAction(this.plugin.app));
      }
    });
  }
  registEditProp() {
    let metaedit = this.plugin.app.plugins.plugins["metaedit"];
    this.plugin.addCommand({
      id: "edit-front-matter-in-current-file-links",
      name: "Edit Front Matter in current file links ...",
      checkCallback: (checking) => {
        if (!checking) {
          new CurrentFileReader(this.plugin).read(new EditFrontMatterAction(this.plugin.app));
        }
        return metaedit != null;
      }
    });
  }
  registDeleteFile() {
    this.plugin.addCommand({
      id: "delete-links-in-current-file",
      name: "Delete link-files in current file!",
      callback: () => {
        new CurrentFileReader(this.plugin).read(new DeleteAction(this.plugin.app));
      }
    });
  }
  registMergeFile() {
    this.plugin.addCommand({
      id: "merge-links-to",
      name: "Merge links in current file to ...",
      callback: () => {
        new ChooseFileModal(this.plugin.app, new CurrentFileReader(this.plugin)).open();
      }
    });
  }
  registCreateFile() {
    this.plugin.addCommand({
      id: "create-links",
      name: "Create links in current file ...",
      callback: () => {
        let actionFunc = (path) => {
          return new CreateAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new CurrentFileReader(this.plugin, ReadType.UN_RESOLVED_LINKS), actionFunc).open();
      }
    });
  }
  registSyncFileToFlomo() {
    this.plugin.addCommand({
      id: "sync-links-to",
      name: "Sync links in current file to flomo ...",
      callback: () => {
        new CurrentFileReader(this.plugin).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registSyncContentToFlomo() {
    this.plugin.addCommand({
      id: "sync-content-to",
      name: "Sync content in current file to flomo ...",
      callback: () => {
        new CurrentFileReader(this.plugin, ReadType.CONTENT).read(new SyncFlomoAction(this.plugin));
      }
    });
  }
  registSyncSelectionToFlomo() {
    this.plugin.addCommand({
      id: "sync-selection-to",
      name: "Sync selection in current file to flomo ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new CurrentFileReader(this.plugin, ReadType.SELECTION, editor.getSelection()).read(new SyncFlomoAction(this.plugin));
        }
        return editor.getSelection() != "";
      }
    });
  }
  registMoveFile() {
    this.plugin.addCommand({
      id: "move-links-to",
      name: "Move links in current file to ...",
      callback: () => {
        let actionFunc = (path) => {
          return new MoveAction(this.plugin.app, path);
        };
        new ChooseFolderModal(this.plugin.app, new CurrentFileReader(this.plugin), actionFunc).open();
      }
    });
  }
};

// src/command/dataview-command.ts
var import_obsidian_dataview2 = __toModule(require_lib());

// src/action/copy-action.ts
var import_obsidian21 = __toModule(require("obsidian"));

// src/modal/copy-to-clipboard-confirm-modal.ts
var import_obsidian20 = __toModule(require("obsidian"));
var CopyToClipboardConfirmModal = class extends import_obsidian20.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm copy to clipboard?" });
    let htmlStr = this.prepareHTMLStr();
    let el = contentEl.createEl("div");
    el.innerHTML = htmlStr;
    new import_obsidian20.Setting(contentEl).addToggle((toggle) => {
      toggle.setTooltip("Copy name only!");
      toggle.onChange((val) => {
        this.nameOnlyFlag = val;
        htmlStr = this.prepareHTMLStr();
        el.innerHTML = htmlStr;
      });
    });
    new import_obsidian20.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      let str = this.prepareStr();
      navigator.clipboard.writeText(str);
      new import_obsidian20.Notice("Copy links success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian20.Notice("Copy to Clipboard Canceled!");
    }));
  }
  prepareStr() {
    let str = "";
    if (this.nameOnlyFlag) {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (name.endsWith(".md")) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + name + "]]\n";
      });
    } else {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (name.endsWith(".md")) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + ff.path + "|" + name + "]]\n";
      });
    }
    return str;
  }
  prepareHTMLStr() {
    let str = "";
    if (this.nameOnlyFlag) {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (name.endsWith(".md")) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + name + "]]<br>";
      });
    } else {
      this.resultArr.forEach((ff) => {
        let name = ff.name;
        if (name.endsWith(".md")) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + ff.path + "|" + name + "]]<br>";
      });
    }
    return str;
  }
};

// src/action/copy-action.ts
var CopyAction = class {
  constructor(app) {
    this.app = app;
  }
  act(actionModels) {
    if (actionModels.length > 0) {
      let files = actionModels.map((model) => model.file);
      new CopyToClipboardConfirmModal(this.app, files).open();
    } else {
      new import_obsidian21.Notice("No Files Found!");
    }
  }
};

// src/reader/dataview-reader.ts
var import_obsidian22 = __toModule(require("obsidian"));
var import_obsidian_dataview = __toModule(require_lib());
var DataviewReader = class {
  constructor(plugin, queryStr) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.queryStr = queryStr;
  }
  read(action) {
    let readInfo = new ReadInfo(this.plugin.settings.limit);
    let api = (0, import_obsidian_dataview.getAPI)();
    let qStr = formatStr(this.queryStr);
    api.query(qStr).then((res) => {
      if (res.successful) {
        let filePaths = [];
        if (res.value.type == "list") {
          res.value.values.forEach((it) => {
            filePaths.push(it.path);
          });
        } else if (res.value.type == "table") {
          filePaths = res.value.values;
          res.value.values.forEach((it) => {
            it.forEach((innerIt) => {
              if (innerIt && innerIt.path) {
                filePaths.push(innerIt.path);
                return;
              }
            });
          });
        } else {
          res.value.values.forEach((it) => {
            filePaths.push(it.link.path);
          });
        }
        try {
          filePaths.forEach((filePath) => {
            let ff = this.app.vault.getAbstractFileByPath(filePath.toString());
            if (ff != null) {
              readInfo.addFile(ff);
            }
          });
          action.act(readInfo.getModels());
        } catch (e) {
          new import_obsidian22.Notice(e.message);
        }
      } else {
        new import_obsidian22.Notice("Query string error![" + this.queryStr + "]");
      }
    });
  }
};
function formatStr(queryStr) {
  let str = queryStr.trimStart();
  let commandStr = str.substring(0, 4);
  if (commandStr.toUpperCase() == "LIST") {
    return "LIST" + str.substring(4, str.length);
  }
  if (commandStr.toUpperCase() == "TABL") {
    return "TABLE" + str.substring(5, str.length);
  }
  if (commandStr.toUpperCase() == "TASK") {
    return "TASK" + str.substring(4, str.length);
  }
  return queryStr;
}

// src/command/dataview-command.ts
var DataviewCommand = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  regist() {
    let dataviewApi = (0, import_obsidian_dataview2.getAPI)();
    this.registMoveFile(dataviewApi);
    this.registSyncFlomo(dataviewApi);
    this.registMergeFile(dataviewApi);
    this.registDeleteFile(dataviewApi);
    this.registCopyLinks(dataviewApi);
    this.registEditProp(dataviewApi);
    this.registRenameFile(dataviewApi);
  }
  registRenameFile(dataviewApi) {
    this.plugin.addCommand({
      id: "rename-in-dataview-results",
      name: "Rename in dataview results ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new RenameAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registEditProp(dataviewApi) {
    let metaedit = this.plugin.app.plugins.plugins["metaedit"];
    this.plugin.addCommand({
      id: "edit-front-matter-in-dataview-results",
      name: "Edit Front Matter in dataview results ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new EditFrontMatterAction(this.plugin.app));
        }
        return dataviewApi != null && metaedit != null;
      }
    });
  }
  registCopyLinks(dataviewApi) {
    this.plugin.addCommand({
      id: "copy-dataview-result-links",
      name: "Copy dataview result links!",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new CopyAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registDeleteFile(dataviewApi) {
    this.plugin.addCommand({
      id: "delete-dataview-results",
      name: "Delete dataview query results!",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new DeleteAction(this.plugin.app));
        }
        return dataviewApi != null;
      }
    });
  }
  registMergeFile(dataviewApi) {
    this.plugin.addCommand({
      id: "merge-dataview-results-to",
      name: "Merge dataview query results to ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new ChooseFileModal(this.plugin.app, new DataviewReader(this.plugin, editor.getSelection())).open();
        }
        return dataviewApi != null;
      }
    });
  }
  registSyncFlomo(dataviewApi) {
    this.plugin.addCommand({
      id: "sync-dataview-results-to",
      name: "Sync dataview query results to flomo ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          new DataviewReader(this.plugin, editor.getSelection()).read(new SyncFlomoAction(this.plugin));
        }
        return dataviewApi != null;
      }
    });
  }
  registMoveFile(dataviewApi) {
    this.plugin.addCommand({
      id: "move-dataview-results-to",
      name: "Move dataview query results to ...",
      editorCheckCallback: (checking, editor, view) => {
        if (!checking) {
          let actionFunc = (path) => {
            return new MoveAction(this.plugin.app, path);
          };
          new ChooseFolderModal(this.plugin.app, new DataviewReader(this.plugin, editor.getSelection()), actionFunc).open();
        }
        return dataviewApi != null;
      }
    });
  }
};

// main.ts
var FileCookerPlugin = class extends import_obsidian23.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      new CurrentFileCommand(this).regist();
      new ClipboardCommand(this).regist();
      new DataviewCommand(this).regist();
      this.addSettingTab(new FileCookerSettingTab(this.app, this));
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var DEFAULT_SETTINGS = {
  flomoAPI: "",
  limit: "300"
};
var FileCookerSettingTab = class extends import_obsidian23.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for File Cooker!" });
    new import_obsidian23.Setting(containerEl).setName("Limit").setDesc("config batch file limit").addText((text) => text.setPlaceholder("Enter batch file limit").setValue(this.plugin.settings.limit).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.limit = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian23.Setting(containerEl).setName("flomoAPI").setDesc("config flomo API to sync notes").addText((text) => text.setPlaceholder("Enter flomo API").setValue(this.plugin.settings.flomoAPI).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.flomoAPI = value;
      yield this.plugin.saveSettings();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvYnJvd3Nlci5qcyIsICJub2RlX21vZHVsZXMvb2JzaWRpYW4tZGF0YXZpZXcvc3JjL2luZGV4LnRzIiwgIm1haW4udHMiLCAic3JjL2FjdGlvbi9kZWxldGUtYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9kZWxldGUtY29uZmlybS1tb2RhbC50cyIsICJzcmMvYWN0aW9uL2VkaXQtZnJvbnQtbWF0dGVyLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvZWRpdC1mcm9udC1tYXR0ZXItbW9kYWwudHMiLCAic3JjL2FjdGlvbi9tb3ZlLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvbW92ZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9hY3Rpb24vcmVuYW1lLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvcmVuYW1lLW1vZGFsLnRzIiwgInNyYy9tb2RhbC9yZW5hbWUtY29uZmlybS1tb2RhbC50cyIsICJzcmMvYWN0aW9uL3N5bmMtZmxvbW8tYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9zeW5jLWZsb21vLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL21vZGFsL2Nob29zZS1maWxlLW1vZGFsLnRzIiwgInNyYy9hY3Rpb24vbWVyZ2UtYWN0aW9uLnRzIiwgInNyYy9tb2RhbC9tZXJnZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9tb2RhbC9jaG9vc2UtZm9sZGVyLW1vZGFsLnRzIiwgInNyYy9yZWFkZXIvY2xpcGJvYXJkLXJlYWRlci50cyIsICJzcmMvYWN0aW9uL2FjdGlvbi50cyIsICJzcmMvcmVhZGVyL3JlYWQtaW5mby50cyIsICJzcmMvY29tbWFuZC9jbGlwYm9hcmQtY29tbWFuZC50cyIsICJzcmMvYWN0aW9uL2NyZWF0ZS1hY3Rpb24udHMiLCAic3JjL21vZGFsL2NyZWF0ZS1jb25maXJtLW1vZGFsLnRzIiwgInNyYy9yZWFkZXIvY3VycmVudC1maWxlLXJlYWRlci50cyIsICJzcmMvY29tbWFuZC9jdXJyZW50LWZpbGUtY29tbWFuZC50cyIsICJzcmMvY29tbWFuZC9kYXRhdmlldy1jb21tYW5kLnRzIiwgInNyYy9hY3Rpb24vY29weS1hY3Rpb24udHMiLCAic3JjL21vZGFsL2NvcHktdG8tY2xpcGJvYXJkLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL3JlYWRlci9kYXRhdmlldy1yZWFkZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIlwidXNlIHN0cmljdFwiO1xuXG4vLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbFxudmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gdGhlIG9ubHkgcmVsaWFibGUgbWVhbnMgdG8gZ2V0IHRoZSBnbG9iYWwgb2JqZWN0IGlzXG5cdC8vIGBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpYFxuXHQvLyBIb3dldmVyLCB0aGlzIGNhdXNlcyBDU1AgdmlvbGF0aW9ucyBpbiBDaHJvbWUgYXBwcy5cblx0aWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gc2VsZjsgfVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHdpbmRvdzsgfVxuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIGdsb2JhbDsgfVxuXHR0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCcpO1xufVxuXG52YXIgZ2xvYmFsID0gZ2V0R2xvYmFsKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGdsb2JhbC5mZXRjaDtcblxuLy8gTmVlZGVkIGZvciBUeXBlU2NyaXB0IGFuZCBXZWJwYWNrLlxuaWYgKGdsb2JhbC5mZXRjaCkge1xuXHRleHBvcnRzLmRlZmF1bHQgPSBnbG9iYWwuZmV0Y2guYmluZChnbG9iYWwpO1xufVxuXG5leHBvcnRzLkhlYWRlcnMgPSBnbG9iYWwuSGVhZGVycztcbmV4cG9ydHMuUmVxdWVzdCA9IGdsb2JhbC5SZXF1ZXN0O1xuZXhwb3J0cy5SZXNwb25zZSA9IGdsb2JhbC5SZXNwb25zZTsiLCAiLy8gQmFzaWMgQVBJIHR5cGUuXG5leHBvcnQgdHlwZSB7IERhdGF2aWV3QXBpIH0gZnJvbSBcImFwaS9wbHVnaW4tYXBpXCI7XG5cbi8vIENvcmUgRGF0YXZpZXcgdHlwZXMuXG5leHBvcnQgdHlwZSB7IERhdGVUaW1lLCBEdXJhdGlvbiB9IGZyb20gXCJsdXhvblwiO1xuZXhwb3J0IHR5cGUge1xuICAgIExpbmssXG4gICAgRGF0YU9iamVjdCxcbiAgICBMaXRlcmFsVHlwZSxcbiAgICBMaXRlcmFsLFxuICAgIExpdGVyYWxSZXByLFxuICAgIFdyYXBwZWRMaXRlcmFsLFxuICAgIExpdGVyYWxXcmFwcGVyLFxuICAgIFdpZGdldCxcbn0gZnJvbSBcImRhdGEtbW9kZWwvdmFsdWVcIjtcblxuZXhwb3J0IHR5cGUgeyBSZXN1bHQsIFN1Y2Nlc3MsIEZhaWx1cmUgfSBmcm9tIFwiYXBpL3Jlc3VsdFwiO1xuZXhwb3J0IHR5cGUgeyBEYXRhQXJyYXkgfSBmcm9tIFwiYXBpL2RhdGEtYXJyYXlcIjtcblxuLy8gRGF0YXZpZXcgSW5kZXguXG5leHBvcnQgdHlwZSB7IExpc3RJdGVtLCBQYWdlTWV0YWRhdGEgfSBmcm9tIFwiZGF0YS1tb2RlbC9tYXJrZG93blwiO1xuZXhwb3J0IHR5cGUgeyBGdWxsSW5kZXgsIFByZWZpeEluZGV4LCBJbmRleE1hcCB9IGZyb20gXCJkYXRhLWluZGV4L2luZGV4XCI7XG5cbi8vIFNlcmlhbGl6ZWQgdHlwZXMgd2hpY2ggZGVzY3JpYmUgYWxsIG91dHB1dHMgb2Ygc2VyaWFsaXphdGlvbi5cbmV4cG9ydCB0eXBlIHsgU01hcmtkb3duUGFnZSwgU0xpc3RFbnRyeSwgU1Rhc2sgfSBmcm9tIFwiZGF0YS1tb2RlbC9zZXJpYWxpemVkL21hcmtkb3duXCI7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBJbXBsZW1lbnRhdGlvbiAvL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuaW1wb3J0IHR5cGUgeyBEYXRhdmlld0FwaSB9IGZyb20gXCJhcGkvcGx1Z2luLWFwaVwiO1xuXG5pbXBvcnQgXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuLy8gVXRpbGl0eSBmdW5jdGlvbnMuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBEYXRhdmlldyBBUEkgZnJvbSB0aGUgYXBwIGlmIHByb3ZpZGVkOyBpZiBub3QsIGl0IGlzIGluZmVycmVkIGZyb20gdGhlIGdsb2JhbCBBUEkgb2JqZWN0IGluc3RhbGxlZFxuICogb24gdGhlIHdpbmRvdy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEFQSSA9IChhcHA/OiBBcHApOiBEYXRhdmlld0FwaSB8IHVuZGVmaW5lZCA9PiB7XG4gICAgaWYgKGFwcCkgcmV0dXJuIGFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXc/LmFwaTtcbiAgICBlbHNlIHJldHVybiB3aW5kb3cuRGF0YXZpZXdBUEk7XG59O1xuXG4vKiogRGV0ZXJtaW5lIGlmIERhdGF2aWV3IGlzIGVuYWJsZWQgaW4gdGhlIGdpdmVuIGFwcGxpY2F0aW9uLiAqL1xuZXhwb3J0IGNvbnN0IGlzUGx1Z2luRW5hYmxlZCA9IChhcHA6IEFwcCkgPT4gYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFwiZGF0YXZpZXdcIik7XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDbGlwYm9hcmRDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvY2xpcGJvYXJkLWNvbW1hbmQnO1xuaW1wb3J0IHsgQ3VycmVudEZpbGVDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvY3VycmVudC1maWxlLWNvbW1hbmQnO1xuaW1wb3J0IHsgRGF0YXZpZXdDb21tYW5kIH0gZnJvbSAnc3JjL2NvbW1hbmQvZGF0YXZpZXctY29tbWFuZCc7XG5pbXBvcnQgKiBhcyBpbnRlcm5hbCBmcm9tICdzdHJlYW0nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlQ29va2VyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEZpbGVDb29rZXJQbHVnaW5TZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0bmV3IEN1cnJlbnRGaWxlQ29tbWFuZCh0aGlzKS5yZWdpc3QoKTtcblx0XHRuZXcgQ2xpcGJvYXJkQ29tbWFuZCh0aGlzKS5yZWdpc3QoKTtcblx0XHRuZXcgRGF0YXZpZXdDb21tYW5kKHRoaXMpLnJlZ2lzdCgpO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEZpbGVDb29rZXJTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEZpbGVDb29rZXJQbHVnaW5TZXR0aW5ncyA9IHtcblx0ZmxvbW9BUEk6ICcnLFxuXHRsaW1pdDogJzMwMCdcbn1cblxuaW50ZXJmYWNlIEZpbGVDb29rZXJQbHVnaW5TZXR0aW5ncyB7XG5cdGZsb21vQVBJOiBzdHJpbmc7XG5cdGxpbWl0OiBzdHJpbmc7XG59XG5cbmNsYXNzIEZpbGVDb29rZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1NldHRpbmdzIGZvciBGaWxlIENvb2tlciEnIH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnTGltaXQnKVxuXHRcdFx0LnNldERlc2MoJ2NvbmZpZyBiYXRjaCBmaWxlIGxpbWl0Jylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGJhdGNoIGZpbGUgbGltaXQnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGltaXQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW1pdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdmbG9tb0FQSScpXG5cdFx0XHQuc2V0RGVzYygnY29uZmlnIGZsb21vIEFQSSB0byBzeW5jIG5vdGVzJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZsb21vIEFQSScpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mbG9tb0FQSSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZsb21vQVBJID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0fVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRGVsZXRlQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9kZWxldGUtY29uZmlybS1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25Nb2RlbCB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRGVsZXRlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuICAgICAgICBpZiAoYWN0aW9uTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBmaWxlcyA9IGFjdGlvbk1vZGVscy5tYXAobW9kZWwgPT4gbW9kZWwuZmlsZSk7XG4gICAgICAgICAgICBuZXcgRGVsZXRlQ29uZmlybU1vZGFsKHRoaXMuYXBwLCBmaWxlcykub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxldGVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnI9IHJlc3VsdEFycjtcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIERlbGV0ZT9cIiB9KTtcblxuICAgICAgICBpZiAodGhpcy5yZXN1bHRBcnIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTm8gZmlsZXMgZm91bmQhXCIgfSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDbG9zZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnBhdGggfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LnRyYXNoKGluZm8sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkRlbGV0ZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJEZWxldGUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gb25DbG9zZSgpIHtcbiAgICAvLyAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIC8vICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAvLyB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEVkaXRGcm9udE1hdHRlck1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9lZGl0LWZyb250LW1hdHRlci1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25Nb2RlbCB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRWRpdEZyb250TWF0dGVyQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuICAgICAgICBpZiAoYWN0aW9uTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBmaWxlcyA9IGFjdGlvbk1vZGVscy5tYXAobW9kZWwgPT4gbW9kZWwuZmlsZSk7XG4gICAgICAgICAgICBuZXcgRWRpdEZyb250TWF0dGVyTW9kYWwodGhpcy5hcHAsIGZpbGVzKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3RjE2XHU4RjkxRnJvbnQgTWF0dGVyXHU1QzVFXHU2MDI3XG4gKi9cbmV4cG9ydCBjbGFzcyBFZGl0RnJvbnRNYXR0ZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcbiAgICBrZXk6IFN0cmluZztcbiAgICB2YWw6IFN0cmluZztcbiAgICBvdmVycmlkZUZsYWc6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgICAgIGxldCB0bXBGbGFnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJvdmVycmlkZUZsYWdcIik7XG4gICAgICAgIGlmICh0bXBGbGFnICYmIFwidHJ1ZVwiID09IHRtcEZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcnJpZGVGbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkVkaXQgRnJvbnQgTWF0dGVyXCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIkZyb250IE1hdHRlciBLZXlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXkgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkuYWRkVGV4dCgodHh0KSA9PlxuICAgICAgICAgICAgICAgICAgICB0eHQuc2V0UGxhY2Vob2xkZXIoXCJGcm9udCBNYXR0ZXIgVmFsdWVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWwgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMub3ZlcnJpZGVGbGFnKTtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLnNldFRvb2x0aXAoXCJPdmVycmlkZSBpZiBleGlzdHMhXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJvdmVycmlkZUZsYWdcIiwgdmFsICsgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm92ZXJyaWRlRmxhZyA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmtleSA9PSBudWxsIHx8IHRoaXMua2V5LnRyaW0oKSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJLZXkgY291bGQgbm90IGJlIGVtcHR5IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWwgPT0gbnVsbCB8fCB0aGlzLnZhbC50cmltKCkgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVmFsdWUgY291bGQgbm90IGJlIGVtcHR5IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFwaSA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1tcIm1ldGFlZGl0XCJdLmFwaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY19udW0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1X251bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlc3VsdEFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMucmVzdWx0QXJyW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gYXdhaXQgYXBpLmdldFByb3BlcnR5VmFsdWUodGhpcy5rZXksIGluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5jcmVhdGVZYW1sUHJvcGVydHkodGhpcy5rZXksIHRoaXMudmFsLCBpbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNfbnVtICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vdmVycmlkZUZsYWcgfHwgdmFsLnRyaW0oKSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkudXBkYXRlKHRoaXMua2V5LCB0aGlzLnZhbCwgaW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1X251bSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFZGl0IFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBZGQgXCIgKyBjX251bSArIFwiICFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlVwZGF0ZSBcIiArIHVfbnVtICsgXCIgIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFZGl0IENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IE1vdmVDb25maXJtTW9kYWwgfSBmcm9tIFwiLi4vbW9kYWwvbW92ZS1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBNb3ZlSW5mbyB9IGZyb20gXCIuLi9tb2RhbC9tb3ZlLWluZm9cIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIE1vdmVBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG4gICAgdGFyZ2V0UGF0aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRhcmdldFBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy50YXJnZXRQYXRoID0gdGFyZ2V0UGF0aDtcbiAgICB9XG5cbiAgICBhY3QoYWN0aW9uTW9kZWxzOiBBY3Rpb25Nb2RlbFtdKSB7XG5cbiAgICAgICAgY29uc3QgbW92ZUluZm9zOiBNb3ZlSW5mb1tdID0gW107XG5cbiAgICAgICAgaWYgKGFjdGlvbk1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhY3Rpb25Nb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGZmID0gbW9kZWwuZmlsZTtcbiAgICAgICAgICAgICAgICBtb3ZlSW5mb3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUZpbGU6IGZmLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREaXI6IHRoaXMudGFyZ2V0UGF0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgbmV3IE1vdmVDb25maXJtTW9kYWwodGhpcy5hcHAsIG1vdmVJbmZvcykub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTW92ZUluZm8gfSBmcm9tICdzcmMvbW9kYWwvbW92ZS1pbmZvJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTc5RkJcdTUyQTgvXHU2MkY3XHU4RDFEXHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBNb3ZlQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIG1vdmVJbmZvczogTW92ZUluZm9bXTtcbiAgICBjb3B5RmxhZzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtb3ZlSW5mb3M6IE1vdmVJbmZvW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5tb3ZlSW5mb3MgPSBtb3ZlSW5mb3M7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlybSBNb3ZlL0NvcHk/XCIgfSk7XG5cbiAgICAgICAgdGhpcy5tb3ZlSW5mb3MuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8uc291cmNlRmlsZS5wYXRoICsgXCIgLT4gXCIgKyBpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUgfSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFRvb2x0aXAoXCJDb3B5IGluc3RlYWQhXCIpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29weUZsYWcgPSB2YWw7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29weUZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm1vdmVJbmZvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMubW92ZUluZm9zW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNvcHkoKGluZm8uc291cmNlRmlsZSBhcyBURmlsZSksIGluZm8udGFyZ2V0RGlyICsgXCIvXCIgKyBpbmZvLnNvdXJjZUZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDb3B5IFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm1vdmVJbmZvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMubW92ZUluZm9zW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoaW5mby5zb3VyY2VGaWxlLCBpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTW92ZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTW92ZSBDYW5jZWxlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBSZW5hbWVNb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvcmVuYW1lLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24sIEFjdGlvbk1vZGVsIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW5hbWVBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QoYWN0aW9uTW9kZWxzOiBBY3Rpb25Nb2RlbFtdKSB7XG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGZpbGVzID0gYWN0aW9uTW9kZWxzLm1hcChtb2RlbCA9PiBtb2RlbC5maWxlKTtcbiAgICAgICAgICAgIG5ldyBSZW5hbWVNb2RhbCh0aGlzLmFwcCwgZmlsZXMpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFJlbmFtZUNvbmZpcm1Nb2RhbCB9IGZyb20gJy4vcmVuYW1lLWNvbmZpcm0tbW9kYWwnO1xuXG4vKipcbiAqIFx1MDBBMFx1OTFDRFx1NTQ3RFx1NTQwRFx1OEJCRVx1N0Y2RVx1NUYzOVx1N0E5N1xuICovXG5leHBvcnQgY2xhc3MgUmVuYW1lTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG4gICAgcHJlZml4OiBTdHJpbmc7XG4gICAgc3VmZml4OiBTdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiUmVuYW1lIEZpbGVzXCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5wYXRoIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIlByZWZpeFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWZpeCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIlN1ZmZpeFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1ZmZpeCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5wcmVmaXggPT0gbnVsbCB8fCB0aGlzLnByZWZpeC50cmltKCkgPT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAodGhpcy5zdWZmaXggPT0gbnVsbCB8fCB0aGlzLnN1ZmZpeC50cmltKCkgPT0gXCJcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlByZWZpeCBhbmQgU3VmZml4IGNvdWxkIG5vdCBiZSBhbGwgZW1wdHkhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVuYW1lQ29uZmlybU1vZGFsKHRoaXMuYXBwLCB0aGlzLnJlc3VsdEFyciwgdGhpcy5wcmVmaXgsIHRoaXMuc3VmZml4KS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUmVuYW1lIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIFx1MDBBMFx1OTFDRFx1NTQ3RFx1NTQwRFx1Nzg2RVx1OEJBNFx1NUYzOVx1N0E5N1xuICovXG5leHBvcnQgY2xhc3MgUmVuYW1lQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIHByZWZpeDogU3RyaW5nO1xuICAgIHN1ZmZpeDogU3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdLCBwcmVmaXg6IFN0cmluZywgc3VmZml4OiBTdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgICAgIHRoaXMucHJlZml4ID0gcHJlZml4O1xuICAgICAgICB0aGlzLnN1ZmZpeCA9IHN1ZmZpeDtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJSZW5hbWUgRmlsZXNcIiB9KTtcblxuICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgbGV0IG5hbWUgPSB0aGlzLm5ld05hbWUoaW5mby5uYW1lKTtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ubmFtZSArIFwiLT5cIiArIG5hbWUgfSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5wcmVmaXggPT0gbnVsbCB8fCB0aGlzLnByZWZpeC50cmltKCkgPT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAodGhpcy5zdWZmaXggPT0gbnVsbCB8fCB0aGlzLnN1ZmZpeC50cmltKCkgPT0gXCJcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUHJlZml4IGFuZCBTdWZmaXggY291bGQgbm90IGJlIGFsbCBlbXB0eSFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlc3VsdEFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvID0gdGhpcy5yZXN1bHRBcnJbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSB0aGlzLm5ld05hbWUoaW5mby5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGluZm8sIGluZm8ucGFyZW50LnBhdGggKyBcIi9cIiArIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbmFtZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUmVuYW1lIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgfVxuXG4gICAgbmV3TmFtZShuYW1lOiBTdHJpbmcpOiBTdHJpbmcge1xuICAgICAgICBsZXQgdE5hbWUgPSBuYW1lICsgXCJcIjtcbiAgICAgICAgbGV0IHN1ZiA9IFwiXCI7XG4gICAgICAgIGlmICh0TmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICAgICAgdE5hbWUgPSB0TmFtZS5yZXBsYWNlKFwiLm1kXCIsIFwiXCIpO1xuICAgICAgICAgICAgc3VmID0gXCIubWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcmVmaXggJiYgdGhpcy5wcmVmaXgudHJpbSgpICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZWZpeC5zdGFydHNXaXRoKFwiLVwiKSkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gdGhpcy5wcmVmaXguc3Vic3RyaW5nKDEsIHRoaXMucHJlZml4Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHROYW1lLnN0YXJ0c1dpdGgodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdE5hbWUgPSB0TmFtZS5zdWJzdHJpbmcodC5sZW5ndGgsIHROYW1lLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0TmFtZSA9IHRoaXMucHJlZml4ICsgdE5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3VmZml4ICYmIHRoaXMuc3VmZml4LnRyaW0oKSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWZmaXguc3RhcnRzV2l0aChcIi1cIikpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IHRoaXMuc3VmZml4LnN1YnN0cmluZygxLCB0aGlzLnN1ZmZpeC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmICh0TmFtZS5lbmRzV2l0aCh0KSkge1xuICAgICAgICAgICAgICAgICAgICB0TmFtZSA9IHROYW1lLnN1YnN0cmluZygwLCB0TmFtZS5sZW5ndGggLSB0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0TmFtZSA9IHROYW1lICsgdGhpcy5zdWZmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHROYW1lICsgc3VmO1xuICAgIH1cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU3luY0Zsb21vQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9zeW5jLWZsb21vLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IEFjdGlvbiwgQWN0aW9uTW9kZWwgfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIFN5bmNGbG9tb0FjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuICAgICAgICBsZXQgZmxvbW9BUEkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mbG9tb0FQSTtcbiAgICAgICAgaWYgKCFmbG9tb0FQSSB8fCBmbG9tb0FQSS50cmltKCkgPT0gXCJcIikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlBsZWFzZSBjb25maWcgZmxvbW9BUEkgZmlyc3QhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbmV3IFN5bmNGbG9tb0NvbmZpcm1Nb2RhbCh0aGlzLnBsdWdpbiwgYWN0aW9uTW9kZWxzKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IGZldGNoIGZyb20gJ25vZGUtZmV0Y2gnO1xuaW1wb3J0IHsgQWN0aW9uTW9kZWwgfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1NDBDXHU2QjY1XHU1MjMwZmxvbW9cdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIFN5bmNGbG9tb0NvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW107XG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luLCBhY3Rpb25Nb2RlbHM6IEFjdGlvbk1vZGVsW10pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFjdGlvbk1vZGVscyA9IGFjdGlvbk1vZGVscztcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIFN5bmMgdG8gZmxvbW8/XCIgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uTW9kZWxzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIk5vIGZpbGVzIGZvdW5kIVwiIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTW9kZWxzLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZmlsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8uZmlsZS5wYXRoIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiU3luYyBTZWxlY3Rpb25cIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hY3Rpb25Nb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLmFjdGlvbk1vZGVsc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLmZpbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoKGluZm8uZmlsZSBhcyBURmlsZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udCA9IGluZm8uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUQ4M0RcdURDNDdcdUZFMEYgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5wbHVnaW4uc2V0dGluZ3MuZmxvbW9BUEksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTeW5jIHRvIGZsb21vIEVycm9yISR7cmVzcG9uc2UudGV4dH1bJHtyZXNwb25zZS5zdGF0dXN9XWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTeW5jIHRvIGZsb21vIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlN5bmMgdG8gZmxvbW8gQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgU3VnZ2VzdE1vZGFsLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1lcmdlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tZXJnZS1hY3Rpb24nO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzcmMvcmVhZGVyL3JlYWRhYmxlJztcblxuLyoqXG4gKiBcdTkwMDlcdTYyRTlcdTY1ODdcdTY4NjNcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIENob29zZUZpbGVNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcblxuXHR0eXBlOiBzdHJpbmc7XG5cdHJlYWRhYmxlOiBSZWFkYWJsZTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVhZGFibGU6IFJlYWRhYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnJlYWRhYmxlID0gcmVhZGFibGU7XG5cdH1cblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG5cdFx0Y29uc3QgZmlsZXM6IHN0cmluZ1tdID0gW107XG5cdFx0Y29uc3QgbG93ZXJDYXNlSW5wdXRTdHIgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXHRcdGFic3RyYWN0RmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cikpIHtcblx0XHRcdFx0ZmlsZXMucHVzaChmaWxlLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmIChmaWxlcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0aWYgKHF1ZXJ5LmVuZHNXaXRoKFwiLm1kXCIpKSB7XG5cdFx0XHRcdGZpbGVzLnB1c2gocXVlcnkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmlsZXMucHVzaChxdWVyeSArIFwiLm1kXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZmlsZXM7XG5cdH1cblxuXHQvLyBSZW5kZXJzIGVhY2ggc3VnZ2VzdGlvbiBpdGVtLlxuXHRyZW5kZXJTdWdnZXN0aW9uKGZpbGVQYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogZmlsZVBhdGggfSk7XG5cdH1cblxuXHQvLyBQZXJmb3JtIGFjdGlvbiBvbiB0aGUgc2VsZWN0ZWQgc3VnZ2VzdGlvbi5cblx0b25DaG9vc2VTdWdnZXN0aW9uKGZpbGU6IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdGxldCBhY3Rpb24gPSBuZXcgTWVyZ2VBY3Rpb24odGhpcy5hcHAsIGZpbGUpO1xuXHRcdHRoaXMucmVhZGFibGUucmVhZChhY3Rpb24pO1xuXHR9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBNZXJnZUNvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvbWVyZ2UtY29uZmlybS1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25Nb2RlbCB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgTWVyZ2VBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG4gICAgdGFyZ2V0RmlsZVBhdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0YXJnZXRGaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnRhcmdldEZpbGVQYXRoID0gdGFyZ2V0RmlsZVBhdGg7XG4gICAgfVxuXG4gICAgYXN5bmMgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuXG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGZpbGVzID0gYWN0aW9uTW9kZWxzLm1hcChtb2RlbCA9PiBtb2RlbC5maWxlKTtcbiAgICAgICAgICAgIG5ldyBNZXJnZUNvbmZpcm1Nb2RhbCh0aGlzLmFwcCwgZmlsZXMsIHRoaXMudGFyZ2V0RmlsZVBhdGgpLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTU0MDhcdTVFNzZcdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIE1lcmdlQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHRhcmdldEZpbGVQYXRoOiBzdHJpbmc7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG4gICAgbGluZUJyZWFrOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10sIHRhcmdldEZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50YXJnZXRGaWxlUGF0aCA9IHRhcmdldEZpbGVQYXRoO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICAgICAgdGhpcy5saW5lQnJlYWsgPSBnZXRMaW5lYnJlYWsoKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIE1lcmdlP1wiIH0pO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTWVyZ2UgYWxsIGZpbGVzIGJlbG93IC0+IFwiICsgdGhpcy50YXJnZXRGaWxlUGF0aCArIFwiICFcIiB9KTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGluZm8ucGF0aCB9KTtcbiAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuLnNldEJ1dHRvblRleHQoXCJDb25maXJtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnRhcmdldEZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRGaWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHRoaXMudGFyZ2V0RmlsZVBhdGgsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5yZXN1bHRBcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMucmVzdWx0QXJyW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8ubmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoKGluZm8gYXMgVEZpbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udCA9IHRoaXMuY2xlYXJZYW1sKGNvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ID0gdGhpcy5kZW1vdGVIZWFkZXIoY29udCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnQgPSBcIiMgXCIgKyBpbmZvLm5hbWUuc3Vic3RyaW5nKDAsIGluZm8ubmFtZS5sZW5ndGggLSAzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmxpbmVCcmVhayArIGNvbnQgKyB0aGlzLmxpbmVCcmVhayArIHRoaXMubGluZUJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hcHBlbmQoKHRhcmdldEZpbGUgYXMgVEZpbGUpLCBjb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udCA9IGAhW1ske2luZm8ubmFtZX1dXSR7dGhpcy5saW5lQnJlYWt9JHt0aGlzLmxpbmVCcmVha31gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hcHBlbmQoKHRhcmdldEZpbGUgYXMgVEZpbGUpLCBjb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTWVyZ2UgU3VjY2VzcyFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1lcmdlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGNsZWFyWWFtbChjb250OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoY29udC5zdGFydHNXaXRoKFwiLS0tXCIpKSB7XG4gICAgICAgICAgICBsZXQgbGluZXMgPSBjb250LnNwbGl0KHRoaXMubGluZUJyZWFrKTtcbiAgICAgICAgICAgIGxldCByZXN1bHRzID0gXCJcIjtcbiAgICAgICAgICAgIGxldCBhcHBlbmRGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGlkeCBpbiBsaW5lcykge1xuICAgICAgICAgICAgICAgIGlmIChsaW5lc1tpZHhdID09IFwiLS0tXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kRmxhZyA9ICFhcHBlbmRGbGFnO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFwcGVuZEZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMgKyBsaW5lc1tpZHhdICsgdGhpcy5saW5lQnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY29udDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlbW90ZUhlYWRlcihjb250OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVnID0gLyMgL2c7XG4gICAgICAgIHJldHVybiBjb250LnJlcGxhY2UocmVnLCBcIiMjIFwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldExpbmVicmVhaygpOiBzdHJpbmcge1xuICAgIGxldCBvc3MgPSBbXCJXaW5kb3dzXCIsIFwiTWFjXCIsIFwiTGludXhcIl07XG4gICAgbGV0IGxpbmVCcmVha3MgPSBbXCJcXHJcXG5cIiwgXCJcXG5cIiwgXCJcXG5cIl07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvc3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG9zID0gb3NzW2ldO1xuICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKG9zKSAhPSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGxpbmVCcmVha3NbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiXFxuXCI7XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIFRBYnN0cmFjdEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2FjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3NyYy9yZWFkZXIvcmVhZGFibGUnO1xuXG4vKipcbiAqIFx1OTAwOVx1NjJFOVx1NzZFRVx1NUY1NVx1NUYzOVx1N0E5N1xuICovXG5leHBvcnQgY2xhc3MgQ2hvb3NlRm9sZGVyTW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8VEFic3RyYWN0RmlsZT4ge1xuXG5cdHR5cGU6IHN0cmluZztcblx0cmVhZGFibGU6IFJlYWRhYmxlO1xuXHRhY3Rpb25GdW5jOiAocGF0aDogc3RyaW5nKSA9PiBBY3Rpb247XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHJlYWRhYmxlOiBSZWFkYWJsZSwgYWN0aW9uRnVuYzogKHBhdGg6IHN0cmluZykgPT4gQWN0aW9uKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnJlYWRhYmxlID0gcmVhZGFibGU7XG5cdFx0dGhpcy5hY3Rpb25GdW5jID0gYWN0aW9uRnVuYztcblx0fVxuXG5cdC8vIFJldHVybnMgYWxsIGF2YWlsYWJsZSBzdWdnZXN0aW9ucy5cblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRBYnN0cmFjdEZpbGVbXSB7XG5cdFx0Y29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG5cdFx0Y29uc3QgZm9sZGVyczogVEFic3RyYWN0RmlsZVtdID0gW107XG5cdFx0Y29uc3QgbG93ZXJDYXNlSW5wdXRTdHIgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXHRcdGFic3RyYWN0RmlsZXMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XG5cdFx0XHRpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlciAmJiBmb2xkZXIucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyQ2FzZUlucHV0U3RyKSkge1xuXHRcdFx0XHRmb2xkZXJzLnB1c2goZm9sZGVyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gZm9sZGVycztcblx0fVxuXG5cdC8vIFJlbmRlcnMgZWFjaCBzdWdnZXN0aW9uIGl0ZW0uXG5cdHJlbmRlclN1Z2dlc3Rpb24oZm9sZGVyOiBUQWJzdHJhY3RGaWxlLCBlbDogSFRNTEVsZW1lbnQpIHtcblx0XHRlbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGZvbGRlci5wYXRoIH0pO1xuXHRcdC8vIGVsLmNyZWF0ZUVsKFwic21hbGxcIiwgeyB0ZXh0OiBmb2xkZXIucGF0aCB9KTtcblx0fVxuXG5cdC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxuXHRvbkNob29zZVN1Z2dlc3Rpb24oZm9sZGVyOiBUQWJzdHJhY3RGaWxlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG5cdFx0bGV0IGFjdGlvbiA9IHRoaXMuYWN0aW9uRnVuYyhmb2xkZXIucGF0aCk7XG5cdFx0dGhpcy5yZWFkYWJsZS5yZWFkKGFjdGlvbik7XG5cdH1cbn0iLCAiaW1wb3J0IEZpbGVDb29rZXJQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCB7IFJlYWRJbmZvIH0gZnJvbSBcIi4vcmVhZC1pbmZvXCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCIuL3JlYWRhYmxlXCI7XG5cblxuZXhwb3J0IGNsYXNzIENsaXBib2FyZFJlYWRlciBpbXBsZW1lbnRzIFJlYWRhYmxlIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgIH1cblxuICAgIHJlYWQoYWN0aW9uOiBBY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlYWRJbmZvID0gbmV3IFJlYWRJbmZvKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbWl0KTtcblxuICAgICAgICBsZXQgcHJvbWlzZVN0ciA9IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTtcblxuICAgICAgICBwcm9taXNlU3RyLnRoZW4oc3RyID0+IHtcbiAgICAgICAgICAgIGxldCBsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSBsaW5lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZi5zdGFydHNXaXRoKFwiW1tcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmLnN1YnN0cmluZygyLCBmLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYuZW5kc1dpdGgoXCJdXVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGYuc3Vic3RyaW5nKDAsIGYubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmLmVuZHNXaXRoKFwiLm1kXCIpICYmICFmLmVuZHNXaXRoKFwiLk1EXCIpICYmICFmLmVuZHNXaXRoKFwiLk1kXCIpICYmICFmLmVuZHNXaXRoKFwiLm1EXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gZiArIFwiLm1kXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGYpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkRmlsZShmZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3Rpb24uYWN0KHJlYWRJbmZvLmdldE1vZGVscygpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGUubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkNsaXBib2FyZCBDb250ZW50IEVycm9yIVwiICsgZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufSIsICJpbXBvcnQgeyBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb24ge1xuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBY3Rpb25Nb2RlbCB7XG4gICAgZmlsZTogVEFic3RyYWN0RmlsZTtcbiAgICBjb250ZW50OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihmaWxlPzogVEFic3RyYWN0RmlsZSwgY29udGVudD86IHN0cmluZykge1xuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uTW9kZWwgfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcblxuLyoqXG4gKiBcdThCRkJcdTUzRDZcdTc2ODRcdTRGRTFcdTYwNkZcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWRJbmZvIHtcblxuICAgIGxpbWl0OiBudW1iZXI7XG4gICAgYWN0aW9uTW9kZWxzOiBBY3Rpb25Nb2RlbFtdO1xuXG4gICAgY29uc3RydWN0b3IobGltaXQ6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0IGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJsaW1pdCBbXCIgKyB0aGlzLmxpbWl0ICsgXCJdIG11c3QgYmUgYSBudW1iZXIhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9uTW9kZWxzID0gW107XG4gICAgfVxuXG4gICAgYWRkRmlsZShmaWxlOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGlvbk1vZGVscy5sZW5ndGggPj0gdGhpcy5saW1pdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9hZCBtb3JlIHRoYW4gXCIgKyB0aGlzLmxpbWl0ICsgXCIgZmlsZXMhXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBtb2RlbCA9IG5ldyBBY3Rpb25Nb2RlbChmaWxlKTtcbiAgICAgICAgdGhpcy5hY3Rpb25Nb2RlbHMucHVzaChtb2RlbCk7XG4gICAgfVxuXG4gICAgYWRkQ29udGVudChjb250OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uTW9kZWxzLmxlbmd0aCA+PSB0aGlzLmxpbWl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2FkIG1vcmUgdGhhbiBcIiArIHRoaXMubGltaXQgKyBcIiBmaWxlcyFcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1vZGVsID0gbmV3IEFjdGlvbk1vZGVsKG51bGwsIGNvbnQpO1xuICAgICAgICB0aGlzLmFjdGlvbk1vZGVscy5wdXNoKG1vZGVsKTtcbiAgICB9XG5cbiAgICBnZXRNb2RlbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbk1vZGVscztcbiAgICB9XG59IiwgImltcG9ydCBGaWxlQ29va2VyUGx1Z2luIGZyb20gJ21haW4nO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hY3Rpb24nO1xuaW1wb3J0IHsgRGVsZXRlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9kZWxldGUtYWN0aW9uJztcbmltcG9ydCB7IEVkaXRGcm9udE1hdHRlckFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZWRpdC1mcm9udC1tYXR0ZXItYWN0aW9uJztcbmltcG9ydCB7IE1vdmVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL21vdmUtYWN0aW9uJztcbmltcG9ydCB7IFJlbmFtZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vcmVuYW1lLWFjdGlvbic7XG5pbXBvcnQgeyBTeW5jRmxvbW9BY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3N5bmMtZmxvbW8tYWN0aW9uJztcbmltcG9ydCB7IENob29zZUZpbGVNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZmlsZS1tb2RhbCc7XG5pbXBvcnQgeyBDaG9vc2VGb2xkZXJNb2RhbCB9IGZyb20gJ3NyYy9tb2RhbC9jaG9vc2UtZm9sZGVyLW1vZGFsJztcbmltcG9ydCB7IENsaXBib2FyZFJlYWRlciB9IGZyb20gJ3NyYy9yZWFkZXIvY2xpcGJvYXJkLXJlYWRlcic7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSAnLi9jb21tYW5kJztcblxuZXhwb3J0IGNsYXNzIENsaXBib2FyZENvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICByZWdpc3QoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0TW92ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jRmxvbW8oKTtcbiAgICAgICAgdGhpcy5yZWdpc3RNZXJnZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3REZWxldGVGaWxlKCk7XG4gICAgICAgIHRoaXMucmVnaXN0RWRpdFByb3AoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RSZW5hbWVGaWxlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RSZW5hbWVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAncmVuYW1lLWluLWNsaXBib2FyZC1maWxlcycsXG4gICAgICAgICAgICBuYW1lOiAnUmVuYW1lIGluIGNsaXBib2FyZCBmaWxlcyAuLi4nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBSZW5hbWVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVkaXQgRnJvbnQgTWF0dGVyIFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9saWp5emUvb2JzaWRpYW4tc3RhdGUtc3dpdGNoZXIvYmxvYi9kMGE4MDA4MWIwZmNjMWI4OTllZWQyZTNkN2U4MzRjMmQ1NzAzODc1L3NyYy91dGlsLnRzI0w0MlxuICAgICAqL1xuICAgIHByaXZhdGUgcmVnaXN0RWRpdFByb3AoKSB7XG4gICAgICAgIGxldCBtZXRhZWRpdCA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZWRpdFwiXTtcblxuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZWRpdC1mcm9udC1tYXR0ZXItaW4tY2xpcGJvYXJkLWZpbGVzJyxcbiAgICAgICAgICAgIG5hbWU6ICdFZGl0IEZyb250IE1hdHRlciBpbiBjbGlwYm9hcmQgZmlsZXMgLi4uJyxcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZFJlYWRlcih0aGlzLnBsdWdpbikucmVhZChuZXcgRWRpdEZyb250TWF0dGVyQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWVkaXQgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3REZWxldGVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZGVsZXRlLWZpbGVzLWluLWNsaXBib2FyZCcsXG4gICAgICAgICAgICBuYW1lOiAnRGVsZXRlIGZpbGVzIGluIGNsaXBib2FyZCEnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBEZWxldGVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0TWVyZ2VGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnbWVyZ2UtZmlsZXMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ01lcmdlIGZpbGVzIHRvIC4uLicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VGaWxlTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMucGx1Z2luKSkub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdFN5bmNGbG9tbygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3N5bmMtZmlsZXMtdG8tZmxvbW8nLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgZmlsZXMgdG8gZmxvbW8gLi4uJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZFJlYWRlcih0aGlzLnBsdWdpbikucmVhZChuZXcgU3luY0Zsb21vQWN0aW9uKHRoaXMucGx1Z2luKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0TW92ZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdtb3ZlLWZpbGVzLXRvJyxcbiAgICAgICAgICAgIG5hbWU6ICdNb3ZlIGZpbGVzIHRvIC4uLicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25GdW5jID0gKHBhdGg6IHN0cmluZyk6IEFjdGlvbiA9PiB7IHJldHVybiBuZXcgTW92ZUFjdGlvbih0aGlzLnBsdWdpbi5hcHAsIHBhdGgpOyB9O1xuICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VGb2xkZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5wbHVnaW4pLCBhY3Rpb25GdW5jKS5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENyZWF0ZUNvbmZpcm1Nb2RhbCB9IGZyb20gXCJzcmMvbW9kYWwvY3JlYXRlLWNvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSBcIi4uL21vZGFsL21vdmUtaW5mb1wiO1xuaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25Nb2RlbCB9IGZyb20gXCIuL2FjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQ3JlYXRlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuICAgIHRhcmdldFBhdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0YXJnZXRQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMudGFyZ2V0UGF0aCA9IHRhcmdldFBhdGg7XG4gICAgfVxuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuXG4gICAgICAgIGNvbnN0IG1vdmVJbmZvczogTW92ZUluZm9bXSA9IFtdO1xuXG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYWN0aW9uTW9kZWxzLmZvckVhY2gobW9kZWwgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBmZiA9IG1vZGVsLmZpbGU7XG4gICAgICAgICAgICAgICAgbW92ZUluZm9zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VGaWxlOiBmZixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGlyOiB0aGlzLnRhcmdldFBhdGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG5ldyBDcmVhdGVDb25maXJtTW9kYWwodGhpcy5hcHAsIG1vdmVJbmZvcykub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTW92ZUluZm8gfSBmcm9tICdzcmMvbW9kYWwvbW92ZS1pbmZvJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTUyMUJcdTVFRkFcdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIENyZWF0ZUNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBtb3ZlSW5mb3M6IE1vdmVJbmZvW107XG4gICAgY29weUZsYWc6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbW92ZUluZm9zOiBNb3ZlSW5mb1tdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMubW92ZUluZm9zID0gbW92ZUluZm9zO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvbmZpcm0gQ3JlYXRlP1wiIH0pO1xuXG4gICAgICAgIHRoaXMubW92ZUluZm9zLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnRhcmdldERpciArIFwiL1wiICsgaW5mby5zb3VyY2VGaWxlLm5hbWUgfSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5tb3ZlSW5mb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMubW92ZUluZm9zW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGluZm8udGFyZ2V0RGlyICsgXCIvXCIgKyBpbmZvLnNvdXJjZUZpbGUubmFtZSwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYXRlIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhdGUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUsIFRGaWxlLCBURm9sZGVyLCBWYXVsdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcInNyYy9hY3Rpb24vYWN0aW9uXCI7XG5pbXBvcnQgeyBSZWFkSW5mbyB9IGZyb20gXCIuL3JlYWQtaW5mb1wiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwiLi9yZWFkYWJsZVwiO1xuXG5leHBvcnQgZW51bSBSZWFkVHlwZSB7XG4gICAgTElOS1MsIFVOX1JFU09MVkVEX0xJTktTLCBDT05URU5ULCBTRUxFQ1RJT05cbn1cblxuZXhwb3J0IGNsYXNzIEN1cnJlbnRGaWxlUmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgcGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luO1xuICAgIGFwcDogQXBwO1xuICAgIHJlYWRUeXBlOiBSZWFkVHlwZSA9IFJlYWRUeXBlLkxJTktTO1xuICAgIHNlbGVjdGlvbjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGaWxlQ29va2VyUGx1Z2luLCByZWFkVHlwZT86IFJlYWRUeXBlLCBzZWxlY3Rpb24/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcbiAgICAgICAgdGhpcy5yZWFkVHlwZSA9IHJlYWRUeXBlO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICB9XG5cbiAgICByZWFkKGFjdGlvbjogQWN0aW9uKTogdm9pZCB7XG4gICAgICAgIGxldCByZWFkSW5mbyA9IG5ldyBSZWFkSW5mbyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW1pdCk7XG5cbiAgICAgICAgbGV0IGN1cnJlbnRGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblxuICAgICAgICBpZiAoY3VycmVudEZpbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGFjdGl2ZSBmaWxlIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjdXJyZW50RmlsZVBhdGggPSBjdXJyZW50RmlsZS5wYXRoO1xuXG4gICAgICAgIGxldCBwYXRocyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5yZWFkVHlwZSA9PSBSZWFkVHlwZS5DT05URU5UKSB7XG4gICAgICAgICAgICBwYXRocy5wdXNoKGN1cnJlbnRGaWxlUGF0aCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWFkVHlwZSA9PSBSZWFkVHlwZS5VTl9SRVNPTFZFRF9MSU5LUykge1xuICAgICAgICAgICAgbGV0IGxpbmtPYmogPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLnVucmVzb2x2ZWRMaW5rc1tjdXJyZW50RmlsZVBhdGhdO1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGxpbmtPYmopIHtcbiAgICAgICAgICAgICAgICBwYXRocy5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbGlua09iaiA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rc1tjdXJyZW50RmlsZVBhdGhdO1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGxpbmtPYmopIHtcbiAgICAgICAgICAgICAgICBwYXRocy5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZFR5cGUgPT0gUmVhZFR5cGUuVU5fUkVTT0xWRURfTElOS1MpIHtcbiAgICAgICAgICAgICAgICAvLyBcdTY3MkFcdTg5RTNcdTY3OTBcdTc2ODRcdTk0RkVcdTYzQTVcdUZGMENcdTUyMUJcdTVFRkFcdTg2NUFcdTYyREZcdTY1ODdcdTRFRjZcdTVCRjlcdThDNjFcbiAgICAgICAgICAgICAgICBwYXRocy5mb3JFYWNoKHBhdGggPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmYgPSBuZXcgVmlydHVhbEZpbGUocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRJbmZvLmFkZEZpbGUoZmYpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVhZFR5cGUgPT0gUmVhZFR5cGUuU0VMRUNUSU9OKSB7XG4gICAgICAgICAgICAgICAgLy8gXHU1NDBDXHU2QjY1XHU1MTg1XHU1QkI5XG4gICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkQ29udGVudCh0aGlzLnNlbGVjdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhdGhzLmZvckVhY2gocGF0aCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRJbmZvLmFkZEZpbGUoZmYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGlvbi5hY3QocmVhZEluZm8uZ2V0TW9kZWxzKCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU1QjlFXHU5NjQ1XHU2NTg3XHU0RUY2XHVGRjBDXHU1QzMxXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU4NjVBXHU2NTg3XHU0RUY2XG4gKiBcdTdFRDNcdTY3ODRcdTU0OENUQWJzdHJhY3RGaWxlXHU0RTAwXHU4MUY0XHVGRjBDXHU2NUI5XHU0RkJGXHU3RURGXHU0RTAwXHU2NENEXHU0RjVDXG4gKi9cbmNsYXNzIFZpcnR1YWxGaWxlIHtcblxuICAgIHZhdWx0OiBWYXVsdDtcbiAgICBwYXRoOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHBhcmVudDogVEZvbGRlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBhdGg6IHN0cmluZykge1xuICAgICAgICBsZXQgaWR4ID0gcGF0aC5sYXN0SW5kZXhPZihcIi9cIik7XG4gICAgICAgIGlmICghcGF0aC5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICAgICAgcGF0aCA9IHBhdGggKyBcIi5tZFwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gcGF0aC5zdWJzdHJpbmcoaWR4LCBwYXRoLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBwYXRoO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9hY3Rpb24nO1xuaW1wb3J0IHsgQ3JlYXRlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9jcmVhdGUtYWN0aW9uJztcbmltcG9ydCB7IERlbGV0ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbic7XG5pbXBvcnQgeyBFZGl0RnJvbnRNYXR0ZXJBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2VkaXQtZnJvbnQtbWF0dGVyLWFjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBSZW5hbWVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3JlbmFtZS1hY3Rpb24nO1xuaW1wb3J0IHsgU3luY0Zsb21vQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9zeW5jLWZsb21vLWFjdGlvbic7XG5pbXBvcnQgeyBDaG9vc2VGaWxlTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZpbGUtbW9kYWwnO1xuaW1wb3J0IHsgQ2hvb3NlRm9sZGVyTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZvbGRlci1tb2RhbCc7XG5pbXBvcnQgeyBDdXJyZW50RmlsZVJlYWRlciwgUmVhZFR5cGUgfSBmcm9tICdzcmMvcmVhZGVyL2N1cnJlbnQtZmlsZS1yZWFkZXInO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZCc7XG5cbmV4cG9ydCBjbGFzcyBDdXJyZW50RmlsZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcblxuICAgIHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICByZWdpc3QoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVnaXN0TW92ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jQ29udGVudFRvRmxvbW8oKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jU2VsZWN0aW9uVG9GbG9tbygpO1xuICAgICAgICB0aGlzLnJlZ2lzdFN5bmNGaWxlVG9GbG9tbygpO1xuICAgICAgICB0aGlzLnJlZ2lzdENyZWF0ZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RNZXJnZUZpbGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3REZWxldGVGaWxlKCk7XG4gICAgICAgIHRoaXMucmVnaXN0RWRpdFByb3AoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RSZW5hbWVGaWxlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RSZW5hbWVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInJlbmFtZS1pbi1jdXJyZW50LWZpbGUtbGlua3NcIixcbiAgICAgICAgICAgIG5hbWU6IFwiUmVuYW1lIGluIGN1cnJlbnQgZmlsZSBsaW5rcyAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBSZW5hbWVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVkaXQgRnJvbnQgTWF0dGVyIFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9saWp5emUvb2JzaWRpYW4tc3RhdGUtc3dpdGNoZXIvYmxvYi9kMGE4MDA4MWIwZmNjMWI4OTllZWQyZTNkN2U4MzRjMmQ1NzAzODc1L3NyYy91dGlsLnRzI0w0MlxuICAgICAqL1xuICAgIHByaXZhdGUgcmVnaXN0RWRpdFByb3AoKSB7XG4gICAgICAgIGxldCBtZXRhZWRpdCA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZWRpdFwiXTtcblxuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImVkaXQtZnJvbnQtbWF0dGVyLWluLWN1cnJlbnQtZmlsZS1saW5rc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJFZGl0IEZyb250IE1hdHRlciBpbiBjdXJyZW50IGZpbGUgbGlua3MgLi4uXCIsXG4gICAgICAgICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLnBsdWdpbikucmVhZChuZXcgRWRpdEZyb250TWF0dGVyQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWVkaXQgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3REZWxldGVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImRlbGV0ZS1saW5rcy1pbi1jdXJyZW50LWZpbGVcIixcbiAgICAgICAgICAgIG5hbWU6IFwiRGVsZXRlIGxpbmstZmlsZXMgaW4gY3VycmVudCBmaWxlIVwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4pLnJlYWQobmV3IERlbGV0ZUFjdGlvbih0aGlzLnBsdWdpbi5hcHApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RNZXJnZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibWVyZ2UtbGlua3MtdG9cIixcbiAgICAgICAgICAgIG5hbWU6IFwiTWVyZ2UgbGlua3MgaW4gY3VycmVudCBmaWxlIHRvIC4uLlwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgQ2hvb3NlRmlsZU1vZGFsKHRoaXMucGx1Z2luLmFwcCwgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luKSkub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdENyZWF0ZUZpbGUoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwiY3JlYXRlLWxpbmtzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIkNyZWF0ZSBsaW5rcyBpbiBjdXJyZW50IGZpbGUgLi4uXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25GdW5jID0gKHBhdGg6IHN0cmluZyk6IEFjdGlvbiA9PiB7IHJldHVybiBuZXcgQ3JlYXRlQWN0aW9uKHRoaXMucGx1Z2luLmFwcCwgcGF0aCk7IH07XG4gICAgICAgICAgICAgICAgbmV3IENob29zZUZvbGRlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luLCBSZWFkVHlwZS5VTl9SRVNPTFZFRF9MSU5LUyksIGFjdGlvbkZ1bmMpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTeW5jRmlsZVRvRmxvbW8oKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwic3luYy1saW5rcy10b1wiLFxuICAgICAgICAgICAgbmFtZTogXCJTeW5jIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byBmbG9tbyAuLi5cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEN1cnJlbnRGaWxlUmVhZGVyKHRoaXMucGx1Z2luKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTeW5jQ29udGVudFRvRmxvbW8oKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwic3luYy1jb250ZW50LXRvXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlN5bmMgY29udGVudCBpbiBjdXJyZW50IGZpbGUgdG8gZmxvbW8gLi4uXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLnBsdWdpbiwgUmVhZFR5cGUuQ09OVEVOVCkucmVhZChuZXcgU3luY0Zsb21vQWN0aW9uKHRoaXMucGx1Z2luKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0U3luY1NlbGVjdGlvblRvRmxvbW8oKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwic3luYy1zZWxlY3Rpb24tdG9cIixcbiAgICAgICAgICAgIG5hbWU6IFwiU3luYyBzZWxlY3Rpb24gaW4gY3VycmVudCBmaWxlIHRvIGZsb21vIC4uLlwiLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5wbHVnaW4sIFJlYWRUeXBlLlNFTEVDVElPTiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBTeW5jRmxvbW9BY3Rpb24odGhpcy5wbHVnaW4pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVkaXRvci5nZXRTZWxlY3Rpb24oKSAhPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1vdmVGaWxlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcIm1vdmUtbGlua3MtdG9cIixcbiAgICAgICAgICAgIG5hbWU6IFwiTW92ZSBsaW5rcyBpbiBjdXJyZW50IGZpbGUgdG8gLi4uXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25GdW5jID0gKHBhdGg6IHN0cmluZyk6IEFjdGlvbiA9PiB7IHJldHVybiBuZXcgTW92ZUFjdGlvbih0aGlzLnBsdWdpbi5hcHAsIHBhdGgpOyB9O1xuICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VGb2xkZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLnBsdWdpbiksIGFjdGlvbkZ1bmMpLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRGF0YXZpZXdBcGksIGdldEFQSSB9IGZyb20gJ29ic2lkaWFuLWRhdGF2aWV3JztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vYWN0aW9uJztcbmltcG9ydCB7IENvcHlBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2NvcHktYWN0aW9uJztcbmltcG9ydCB7IERlbGV0ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbic7XG5pbXBvcnQgeyBFZGl0RnJvbnRNYXR0ZXJBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2VkaXQtZnJvbnQtbWF0dGVyLWFjdGlvbic7XG5pbXBvcnQgeyBNb3ZlQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9tb3ZlLWFjdGlvbic7XG5pbXBvcnQgeyBSZW5hbWVBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL3JlbmFtZS1hY3Rpb24nO1xuaW1wb3J0IHsgU3luY0Zsb21vQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9zeW5jLWZsb21vLWFjdGlvbic7XG5pbXBvcnQgeyBDaG9vc2VGaWxlTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZpbGUtbW9kYWwnO1xuaW1wb3J0IHsgQ2hvb3NlRm9sZGVyTW9kYWwgfSBmcm9tICdzcmMvbW9kYWwvY2hvb3NlLWZvbGRlci1tb2RhbCc7XG5pbXBvcnQgeyBEYXRhdmlld1JlYWRlciB9IGZyb20gJ3NyYy9yZWFkZXIvZGF0YXZpZXctcmVhZGVyJztcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmQnO1xuXG5leHBvcnQgY2xhc3MgRGF0YXZpZXdDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG5cbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZpbGVDb29rZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgcmVnaXN0KCk6IHZvaWQge1xuICAgICAgICBsZXQgZGF0YXZpZXdBcGkgPSBnZXRBUEkoKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdE1vdmVGaWxlKGRhdGF2aWV3QXBpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RTeW5jRmxvbW8oZGF0YXZpZXdBcGkpO1xuICAgICAgICB0aGlzLnJlZ2lzdE1lcmdlRmlsZShkYXRhdmlld0FwaSk7XG4gICAgICAgIHRoaXMucmVnaXN0RGVsZXRlRmlsZShkYXRhdmlld0FwaSk7XG4gICAgICAgIHRoaXMucmVnaXN0Q29weUxpbmtzKGRhdGF2aWV3QXBpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RFZGl0UHJvcChkYXRhdmlld0FwaSk7XG5cbiAgICAgICAgLy8gUmVuYW1lIEZpbGVzXG4gICAgICAgIHRoaXMucmVnaXN0UmVuYW1lRmlsZShkYXRhdmlld0FwaSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RSZW5hbWVGaWxlKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInJlbmFtZS1pbi1kYXRhdmlldy1yZXN1bHRzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlJlbmFtZSBpbiBkYXRhdmlldyByZXN1bHRzIC4uLlwiLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5wbHVnaW4sIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgUmVuYW1lQWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRWRpdCBGcm9udCBNYXR0ZXIgXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2xpanl6ZS9vYnNpZGlhbi1zdGF0ZS1zd2l0Y2hlci9ibG9iL2QwYTgwMDgxYjBmY2MxYjg5OWVlZDJlM2Q3ZTgzNGMyZDU3MDM4NzUvc3JjL3V0aWwudHMjTDQyXG4gICAgICogQHBhcmFtIGRhdGF2aWV3QXBpICAgICAgICBcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlZ2lzdEVkaXRQcm9wKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICBsZXQgbWV0YWVkaXQgPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWVkaXRcIl07XG5cbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJlZGl0LWZyb250LW1hdHRlci1pbi1kYXRhdmlldy1yZXN1bHRzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIkVkaXQgRnJvbnQgTWF0dGVyIGluIGRhdGF2aWV3IHJlc3VsdHMgLi4uXCIsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBFZGl0RnJvbnRNYXR0ZXJBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsICYmIG1ldGFlZGl0ICE9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0Q29weUxpbmtzKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnY29weS1kYXRhdmlldy1yZXN1bHQtbGlua3MnLFxuICAgICAgICAgICAgbmFtZTogJ0NvcHkgZGF0YXZpZXcgcmVzdWx0IGxpbmtzIScsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBDb3B5QWN0aW9uKHRoaXMucGx1Z2luLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3REZWxldGVGaWxlKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZGVsZXRlLWRhdGF2aWV3LXJlc3VsdHMnLFxuICAgICAgICAgICAgbmFtZTogJ0RlbGV0ZSBkYXRhdmlldyBxdWVyeSByZXN1bHRzIScsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBEZWxldGVBY3Rpb24odGhpcy5wbHVnaW4uYXBwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1lcmdlRmlsZShkYXRhdmlld0FwaTogRGF0YXZpZXdBcGkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ21lcmdlLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ01lcmdlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gLi4uJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IENob29zZUZpbGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RTeW5jRmxvbW8oZGF0YXZpZXdBcGk6IERhdGF2aWV3QXBpKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzeW5jLWRhdGF2aWV3LXJlc3VsdHMtdG8nLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgZGF0YXZpZXcgcXVlcnkgcmVzdWx0cyB0byBmbG9tbyAuLi4nLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5wbHVnaW4sIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgU3luY0Zsb21vQWN0aW9uKHRoaXMucGx1Z2luKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdE1vdmVGaWxlKGRhdGF2aWV3QXBpOiBEYXRhdmlld0FwaSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnbW92ZS1kYXRhdmlldy1yZXN1bHRzLXRvJyxcbiAgICAgICAgICAgIG5hbWU6ICdNb3ZlIGRhdGF2aWV3IHF1ZXJ5IHJlc3VsdHMgdG8gLi4uJyxcbiAgICAgICAgICAgIGVkaXRvckNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbiwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGlvbkZ1bmMgPSAocGF0aDogc3RyaW5nKTogQWN0aW9uID0+IHsgcmV0dXJuIG5ldyBNb3ZlQWN0aW9uKHRoaXMucGx1Z2luLmFwcCwgcGF0aCk7IH07XG4gICAgICAgICAgICAgICAgICAgIG5ldyBDaG9vc2VGb2xkZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLnBsdWdpbiwgZWRpdG9yLmdldFNlbGVjdGlvbigpKSwgYWN0aW9uRnVuYykub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ29weVRvQ2xpcGJvYXJkQ29uZmlybU1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9jb3B5LXRvLWNsaXBib2FyZC1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24sIEFjdGlvbk1vZGVsIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDb3B5QWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYWN0KGFjdGlvbk1vZGVsczogQWN0aW9uTW9kZWxbXSkge1xuXG4gICAgICAgIGlmIChhY3Rpb25Nb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGZpbGVzID0gYWN0aW9uTW9kZWxzLm1hcChtb2RlbCA9PiBtb2RlbC5maWxlKTtcbiAgICAgICAgICAgIG5ldyBDb3B5VG9DbGlwYm9hcmRDb25maXJtTW9kYWwodGhpcy5hcHAsIGZpbGVzKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gRmlsZXMgRm91bmQhXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgVEFic3RyYWN0RmlsZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBNb3ZlSW5mbyB9IGZyb20gJ3NyYy9tb2RhbC9tb3ZlLWluZm8nO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1Nzg2RVx1OEJBNFx1NjJGN1x1OEQxRFx1NTIzMFx1NTI2QVx1OEQzNFx1Njc3Rlx1NzY4NFx1NjU4N1x1NEVGNlxuICovXG5leHBvcnQgY2xhc3MgQ29weVRvQ2xpcGJvYXJkQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdO1xuICAgIG5hbWVPbmx5RmxhZzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IHJlc3VsdEFycjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIGNvcHkgdG8gY2xpcGJvYXJkP1wiIH0pO1xuXG4gICAgICAgIGxldCBodG1sU3RyID0gdGhpcy5wcmVwYXJlSFRNTFN0cigpO1xuICAgICAgICBsZXQgZWwgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIik7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IGh0bWxTdHI7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFRvb2x0aXAoXCJDb3B5IG5hbWUgb25seSFcIik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lT25seUZsYWcgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgPSB0aGlzLnByZXBhcmVIVE1MU3RyKCk7XG4gICAgICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGh0bWxTdHI7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IHRoaXMucHJlcGFyZVN0cigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDb3B5IGxpbmtzIHN1Y2Nlc3MhXCIpXG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNvcHkgdG8gQ2xpcGJvYXJkIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByZXBhcmVTdHIoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLm5hbWVPbmx5RmxhZykge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChmZiA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBmZi5uYW1lO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lLmVuZHNXaXRoKFwiLm1kXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCBuYW1lLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0ciArPSBcIltbXCIgKyBuYW1lICsgXCJdXVxcblwiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goZmYgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gZmYubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHIgKz0gXCJbW1wiICsgZmYucGF0aCArIFwifFwiICsgbmFtZSArIFwiXV1cXG5cIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBwcmVwYXJlSFRNTFN0cigpOiBzdHJpbmcge1xuICAgICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgICAgaWYgKHRoaXMubmFtZU9ubHlGbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdEFyci5mb3JFYWNoKGZmID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGZmLm5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RyICs9IFwiW1tcIiArIG5hbWUgKyBcIl1dPGJyPlwiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goZmYgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gZmYubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHIgKz0gXCJbW1wiICsgZmYucGF0aCArIFwifFwiICsgbmFtZSArIFwiXV08YnI+XCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcInNyYy9hY3Rpb24vYWN0aW9uXCI7XG5pbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gXCIuL3JlYWRhYmxlXCI7XG5pbXBvcnQgeyBnZXRBUEkgfSBmcm9tIFwib2JzaWRpYW4tZGF0YXZpZXdcIjtcbmltcG9ydCB7IFJlYWRJbmZvIH0gZnJvbSBcIi4vcmVhZC1pbmZvXCI7XG5pbXBvcnQgRmlsZUNvb2tlclBsdWdpbiBmcm9tIFwibWFpblwiO1xuXG5leHBvcnQgY2xhc3MgRGF0YXZpZXdSZWFkZXIgaW1wbGVtZW50cyBSZWFkYWJsZSB7XG5cbiAgICBwbHVnaW46IEZpbGVDb29rZXJQbHVnaW47XG4gICAgYXBwOiBBcHA7XG4gICAgcXVlcnlTdHI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRmlsZUNvb2tlclBsdWdpbiwgcXVlcnlTdHI6IHN0cmluZykge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgICAgICB0aGlzLnF1ZXJ5U3RyID0gcXVlcnlTdHI7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8odGhpcy5wbHVnaW4uc2V0dGluZ3MubGltaXQpO1xuXG4gICAgICAgIGxldCBhcGkgPSBnZXRBUEkoKTtcblxuICAgICAgICBsZXQgcVN0ciA9IGZvcm1hdFN0cih0aGlzLnF1ZXJ5U3RyKTtcblxuICAgICAgICBhcGkucXVlcnkocVN0cikudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzZnVsKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpbGVQYXRoczogYW55ID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHJlcy52YWx1ZS50eXBlID09IFwibGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIExJU1RcbiAgICAgICAgICAgICAgICAgICAgcmVzLnZhbHVlLnZhbHVlcy5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRocy5wdXNoKGl0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy52YWx1ZS50eXBlID09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBUQUJMRVxuICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMgPSByZXMudmFsdWUudmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICByZXMudmFsdWUudmFsdWVzLmZvckVhY2goaXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXQuZm9yRWFjaChpbm5lckl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXJJdCAmJiBpbm5lckl0LnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzLnB1c2goaW5uZXJJdC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRBU0tcbiAgICAgICAgICAgICAgICAgICAgcmVzLnZhbHVlLnZhbHVlcy5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRocy5wdXNoKGl0LmxpbmsucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMuZm9yRWFjaCgoZmlsZVBhdGg6IHsgdG9TdHJpbmc6ICgpID0+IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkSW5mby5hZGRGaWxlKGZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRNb2RlbHMoKSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUXVlcnkgc3RyaW5nIGVycm9yIVtcIiArIHRoaXMucXVlcnlTdHIgKyBcIl1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG4vKipcbiAqIFx1NTkyN1x1NTE5OVx1NTQ3RFx1NEVFNFxuICovXG5mdW5jdGlvbiBmb3JtYXRTdHIocXVlcnlTdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IHN0ciA9IHF1ZXJ5U3RyLnRyaW1TdGFydCgpO1xuXG4gICAgbGV0IGNvbW1hbmRTdHIgPSBzdHIuc3Vic3RyaW5nKDAsIDQpO1xuXG4gICAgaWYgKGNvbW1hbmRTdHIudG9VcHBlckNhc2UoKSA9PSBcIkxJU1RcIikge1xuICAgICAgICByZXR1cm4gXCJMSVNUXCIgKyBzdHIuc3Vic3RyaW5nKDQsIHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIGlmIChjb21tYW5kU3RyLnRvVXBwZXJDYXNlKCkgPT0gXCJUQUJMXCIpIHtcbiAgICAgICAgcmV0dXJuIFwiVEFCTEVcIiArIHN0ci5zdWJzdHJpbmcoNSwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmRTdHIudG9VcHBlckNhc2UoKSA9PSBcIlRBU0tcIikge1xuICAgICAgICByZXR1cm4gXCJUQVNLXCIgKyBzdHIuc3Vic3RyaW5nKDQsIHN0ci5sZW5n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
